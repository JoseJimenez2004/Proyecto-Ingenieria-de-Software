<!DOCTYPE html>
<html>
<head>
    <title>Test Reporte Pacientes</title>
</head>
<body>
    <h1>Probando Reporte de Pacientes</h1>
    <button onclick="probarReporte()">Probar Reporte</button>
    <div id="resultado"></div>

    <script>
        async function probarReporte() {
            const datos = {
                frecuencia: "diario",
                piso: "todos",
                fechaInicio: "2025-01-20",
                fechaFin: "2025-01-20"
            };

            try {
                console.log("üì§ Enviando datos:", datos);
                
                const response = await fetch('http://localhost:5000/api/reportes-pacientes/generar', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(datos)
                });

                console.log("üì• Respuesta status:", response.status);
                const result = await response.json();
                console.log("üì• Respuesta datos:", result);

                if (response.ok) {
                    document.getElementById('resultado').innerHTML = 
                        '‚úÖ √âXITO: ' + result.mensaje + ' (Pacientes: ' + (result.total_pacientes || '0') + ')';
                } else {
                    document.getElementById('resultado').innerHTML = 
                        '‚ùå ERROR: ' + result.error;
                }
            } catch (error) {
                console.error("üî• Error completo:", error);
                document.getElementById('resultado').innerHTML = 
                    '‚ùå ERROR DE CONEXI√ìN: ' + error.message;
            }
        }

        // Probar autom√°ticamente al cargar la p√°gina
        probarReporte();
    </script>
</body>
</html>