<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Inscripci√≥n a Cursos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
        }
        .test-title {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .btn-test {
            margin: 5px;
        }
        .result {
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
            display: none;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .test-card {
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            background: #f8f9fa;
        }
        .status-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status-success {
            background-color: #28a745;
            color: white;
        }
        .status-error {
            background-color: #dc3545;
            color: white;
        }
        .status-warning {
            background-color: #ffc107;
            color: #212529;
        }
        .form-preview {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="text-center mb-4">üß™ Test - Inscripci√≥n a Cursos de Capacitaci√≥n</h1>
        <p class="text-center mb-4">Pruebas para la funcionalidad de inscripci√≥n del personal a cursos de capacitaci√≥n</p>
        
        <!-- Secci√≥n 1: Pruebas de API -->
        <div class="test-section">
            <h2 class="test-title">üîå Pruebas de API</h2>
            
            <div class="test-grid">
                <div class="test-card">
                    <h5>1. Inscripci√≥n V√°lida</h5>
                    <p>Prueba la inscripci√≥n completa con todos los datos requeridos</p>
                    <button class="btn btn-primary btn-test" onclick="testInscripcionValida()">Ejecutar Prueba</button>
                    <div id="result1" class="result"></div>
                </div>
                
                <div class="test-card">
                    <h5>2. Inscripci√≥n sin Curso</h5>
                    <p>Prueba la validaci√≥n cuando no se selecciona un curso</p>
                    <button class="btn btn-warning btn-test" onclick="testInscripcionSinCurso()">Ejecutar Prueba</button>
                    <div id="result2" class="result"></div>
                </div>
                
                <div class="test-card">
                    <h5>3. Inscripci√≥n sin Enfermero</h5>
                    <p>Prueba la validaci√≥n cuando no se ingresa el nombre del enfermero</p>
                    <button class="btn btn-warning btn-test" onclick="testInscripcionSinEnfermero()">Ejecutar Prueba</button>
                    <div id="result3" class="result"></div>
                </div>
                
                <div class="test-card">
                    <h5>4. Inscripci√≥n sin Fecha</h5>
                    <p>Prueba la validaci√≥n cuando no se selecciona fecha</p>
                    <button class="btn btn-warning btn-test" onclick="testInscripcionSinFecha()">Ejecutar Prueba</button>
                    <div id="result4" class="result"></div>
                </div>
                
                <div class="test-card">
                    <h5>5. Inscripci√≥n Duplicada</h5>
                    <p>Prueba la inscripci√≥n del mismo enfermero al mismo curso</p>
                    <button class="btn btn-danger btn-test" onclick="testInscripcionDuplicada()">Ejecutar Prueba</button>
                    <div id="result5" class="result"></div>
                </div>
            </div>
        </div>
        
        <!-- Secci√≥n 2: Pruebas de Formulario -->
        <div class="test-section">
            <h2 class="test-title">üìù Pruebas de Formulario</h2>
            
            <div class="test-grid">
                <div class="test-card">
                    <h5>6. Validaci√≥n de Campos</h5>
                    <p>Prueba la validaci√≥n de todos los campos del formulario</p>
                    <button class="btn btn-primary btn-test" onclick="testValidacionCampos()">Ejecutar Prueba</button>
                    <div id="result6" class="result"></div>
                </div>
                
                <div class="test-card">
                    <h5>7. Limpiar Formulario</h5>
                    <p>Prueba la funcionalidad de reset del formulario</p>
                    <button class="btn btn-secondary btn-test" onclick="testLimpiarFormulario()">Ejecutar Prueba</button>
                    <div id="result7" class="result"></div>
                </div>
                
                <div class="test-card">
                    <h5>8. Campos Opcionales</h5>
                    <p>Prueba el funcionamiento con campos opcionales vac√≠os</p>
                    <button class="btn btn-info btn-test" onclick="testCamposOpcionales()">Ejecutar Prueba</button>
                    <div id="result8" class="result"></div>
                </div>
            </div>
        </div>
        
        <!-- Secci√≥n 3: Pruebas de Integraci√≥n -->
        <div class="test-section">
            <h2 class="test-title">üîÑ Pruebas de Integraci√≥n</h2>
            
            <div class="test-grid">
                <div class="test-card">
                    <h5>9. Flujo Completo de Inscripci√≥n</h5>
                    <p>Prueba el proceso completo: validar ‚Üí inscribir ‚Üí confirmar</p>
                    <button class="btn btn-success btn-test" onclick="testFlujoCompleto()">Ejecutar Prueba</button>
                    <div id="result9" class="result"></div>
                </div>
                
                <div class="test-card">
                    <h5>10. Carga de Cursos Disponibles</h5>
                    <p>Prueba la carga de la lista de cursos activos</p>
                    <button class="btn btn-primary btn-test" onclick="testCargarCursos()">Ejecutar Prueba</button>
                    <div id="result10" class="result"></div>
                </div>
                
                <div class="test-card">
                    <h5>11. M√∫ltiples Inscripciones</h5>
                    <p>Prueba la inscripci√≥n de varios enfermeros al mismo curso</p>
                    <button class="btn btn-warning btn-test" onclick="testMultiplesInscripciones()">Ejecutar Prueba</button>
                    <div id="result11" class="result"></div>
                </div>
            </div>
        </div>
        
        <!-- Bot√≥n para ejecutar todas las pruebas -->
        <div class="text-center mt-4">
            <button class="btn btn-lg btn-primary" onclick="ejecutarTodasLasPruebas()">üöÄ Ejecutar Todas las Pruebas</button>
            <div id="resultGeneral" class="result mt-3"></div>
        </div>
    </div>

    <script>
        // Variables para almacenar resultados
        let resultadosPruebas = [];
        let inscripcionIdCreada = null;

        // Funci√≥n para mostrar resultados
        function mostrarResultado(elementId, mensaje, tipo) {
            const elemento = document.getElementById(elementId);
            elemento.innerHTML = mensaje;
            elemento.className = 'result ' + tipo;
            elemento.style.display = 'block';
        }

        // 1. Prueba: Inscripci√≥n V√°lida
        async function testInscripcionValida() {
            const datosInscripcion = {
                curso: "Atenci√≥n al Paciente Pedi√°trico",
                fecha_inscripcion: "2025-01-20",
                enfermero: "Mar√≠a Gonz√°lez L√≥pez",
                area: "Pediatr√≠a",
                turno: "Matutino (8:00 - 19:00)",
                estado: "inscrito"
            };

            try {
                const response = await fetch('http://localhost:5000/api/inscripciones/registrar', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(datosInscripcion)
                });

                const result = await response.json();
                
                if (response.ok) {
                    inscripcionIdCreada = result.inscripcion_id;
                    mostrarResultado('result1', 
                        `‚úÖ √âXITO: Inscripci√≥n registrada correctamente<br>
                         <strong>ID de Inscripci√≥n:</strong> ${result.inscripcion_id}<br>
                         <strong>Curso:</strong> ${datosInscripcion.curso}<br>
                         <strong>Enfermero:</strong> ${datosInscripcion.enfermero}<br>
                         <strong>Fecha:</strong> ${datosInscripcion.fecha_inscripcion}`, 'success');
                    return true;
                } else {
                    mostrarResultado('result1', 
                        `‚ùå ERROR: ${result.error}<br>
                         <strong>C√≥digo:</strong> ${response.status}`, 'error');
                    return false;
                }
            } catch (error) {
                mostrarResultado('result1', 
                    `‚ùå ERROR DE CONEXI√ìN: ${error.message}<br>
                     <strong>Verifique que el servidor est√© ejecut√°ndose en puerto 5000</strong>`, 'error');
                return false;
            }
        }

        // 2. Prueba: Inscripci√≥n sin Curso
        async function testInscripcionSinCurso() {
            const datosSinCurso = {
                fecha_inscripcion: "2025-01-21",
                enfermero: "Carlos L√≥pez Mart√≠nez",
                area: "Urgencias",
                turno: "Nocturno (19:00 - 8:00)"
                // Falta el campo 'curso'
            };

            try {
                const response = await fetch('http://localhost:5000/api/inscripciones/registrar', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(datosSinCurso)
                });

                const result = await response.json();
                
                if (!response.ok) {
                    mostrarResultado('result2', 
                        `‚úÖ √âXITO: Validaci√≥n funcionando correctamente<br>
                         <strong>Error esperado:</strong> ${result.error}<br>
                         <strong>C√≥digo:</strong> ${response.status}`, 'success');
                    return true;
                } else {
                    mostrarResultado('result2', 
                        `‚ùå ERROR: Se esperaba un error de validaci√≥n pero la solicitud fue exitosa`, 'error');
                    return false;
                }
            } catch (error) {
                mostrarResultado('result2', 
                    `‚ö†Ô∏è ADVERTENCIA: ${error.message}`, 'info');
                return false;
            }
        }

        // 3. Prueba: Inscripci√≥n sin Enfermero
        async function testInscripcionSinEnfermero() {
            const datosSinEnfermero = {
                curso: "Actualizaci√≥n en Cuidados Intensivos",
                fecha_inscripcion: "2025-01-22",
                area: "Terapia Intensiva",
                turno: "Matutino (8:00 - 19:00)"
                // Falta el campo 'enfermero'
            };

            try {
                const response = await fetch('http://localhost:5000/api/inscripciones/registrar', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(datosSinEnfermero)
                });

                const result = await response.json();
                
                if (!response.ok) {
                    mostrarResultado('result3', 
                        `‚úÖ √âXITO: Validaci√≥n de enfermero funcionando<br>
                         <strong>Error:</strong> ${result.error}<br>
                         <strong>C√≥digo:</strong> ${response.status}`, 'success');
                    return true;
                } else {
                    mostrarResultado('result3', 
                        `‚ùå ERROR: Se esperaba un error de validaci√≥n de enfermero`, 'error');
                    return false;
                }
            } catch (error) {
                mostrarResultado('result3', 
                    `‚ö†Ô∏è ADVERTENCIA: ${error.message}`, 'info');
                return false;
            }
        }

        // 4. Prueba: Inscripci√≥n sin Fecha
        async function testInscripcionSinFecha() {
            const datosSinFecha = {
                curso: "Capacitaci√≥n en Empat√≠a y Psicolog√≠a del Dolor",
                enfermero: "Ana Rodr√≠guez P√©rez",
                area: "Hospitalizaci√≥n",
                turno: "Nocturno (19:00 - 8:00)"
                // Falta el campo 'fecha_inscripcion'
            };

            try {
                const response = await fetch('http://localhost:5000/api/inscripciones/registrar', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(datosSinFecha)
                });

                const result = await response.json();
                
                if (!response.ok) {
                    mostrarResultado('result4', 
                        `‚úÖ √âXITO: Validaci√≥n de fecha funcionando<br>
                         <strong>Error:</strong> ${result.error}<br>
                         <strong>C√≥digo:</strong> ${response.status}`, 'success');
                    return true;
                } else {
                    mostrarResultado('result4', 
                        `‚ùå ERROR: Se esperaba un error de validaci√≥n de fecha`, 'error');
                    return false;
                }
            } catch (error) {
                mostrarResultado('result4', 
                    `‚ö†Ô∏è ADVERTENCIA: ${error.message}`, 'info');
                return false;
            }
        }

        // 5. Prueba: Inscripci√≥n Duplicada
        async function testInscripcionDuplicada() {
            const datosDuplicados = {
                curso: "Atenci√≥n al Paciente Pedi√°trico",
                fecha_inscripcion: "2025-01-20",
                enfermero: "Mar√≠a Gonz√°lez L√≥pez", // Mismo enfermero y curso
                area: "Pediatr√≠a",
                turno: "Matutino (8:00 - 19:00)"
            };

            try {
                const response = await fetch('http://localhost:5000/api/inscripciones/registrar', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(datosDuplicados)
                });

                const result = await response.json();
                
                if (!response.ok && (result.error.includes('duplicado') || result.error.includes('ya existe') || result.error.includes('ya inscrito'))) {
                    mostrarResultado('result5', 
                        `‚úÖ √âXITO: Validaci√≥n de duplicados funcionando<br>
                         <strong>Error:</strong> ${result.error}<br>
                         <strong>C√≥digo:</strong> ${response.status}`, 'success');
                    return true;
                } else if (response.ok) {
                    mostrarResultado('result5', 
                        `‚ö†Ô∏è ADVERTENCIA: Se permiti√≥ una inscripci√≥n duplicada`, 'info');
                    return false;
                } else {
                    mostrarResultado('result5', 
                        `‚ùå ERROR: ${result.error}`, 'error');
                    return false;
                }
            } catch (error) {
                mostrarResultado('result5', 
                    `‚ö†Ô∏è ADVERTENCIA: ${error.message}`, 'info');
                return false;
            }
        }

        // 6. Prueba: Validaci√≥n de Campos (simulaci√≥n frontend)
        function testValidacionCampos() {
            // Simulamos la validaci√≥n del formulario
            const campos = {
                curso: "",
                fecha_inscripcion: "",
                enfermero: "",
                area: "Pediatr√≠a",
                turno: "Matutino (8:00 - 19:00)"
            };
            
            let errores = [];
            
            // Validaciones
            if (!campos.curso) errores.push("Seleccione un curso");
            if (!campos.fecha_inscripcion) errores.push("Seleccione una fecha de inscripci√≥n");
            if (!campos.enfermero) errores.push("Ingrese el nombre del enfermero");
            if (campos.fecha_inscripcion && !isValidDate(campos.fecha_inscripcion)) {
                errores.push("Fecha de inscripci√≥n inv√°lida");
            }
            
            if (errores.length > 0) {
                mostrarResultado('result6', 
                    `‚úÖ √âXITO: Validaci√≥n funcionando correctamente<br>
                     <strong>Errores detectados:</strong><br>
                     - ${errores.join('<br>- ')}`, 'success');
                return true;
            } else {
                mostrarResultado('result6', 
                    `‚ùå ERROR: Se esperaba detectar errores de validaci√≥n`, 'error');
                return false;
            }
        }

        // Funci√≥n auxiliar para validar fecha
        function isValidDate(dateString) {
            const regex = /^\d{4}-\d{2}-\d{2}$/;
            if (!dateString.match(regex)) return false;
            const date = new Date(dateString);
            const today = new Date();
            return date instanceof Date && !isNaN(date) && date <= today;
        }

        // 7. Prueba: Limpiar Formulario (simulaci√≥n frontend)
        function testLimpiarFormulario() {
            // Simulamos el limpiado de formulario
            const campos = {
                curso: "Atenci√≥n al Paciente Pedi√°trico",
                fecha_inscripcion: "2025-01-20",
                enfermero: "Mar√≠a Gonz√°lez L√≥pez",
                area: "Pediatr√≠a",
                turno: "Matutino (8:00 - 19:00)"
            };
            
            // Limpiar formulario
            Object.keys(campos).forEach(key => campos[key] = "");
            
            const todosVacios = Object.values(campos).every(valor => valor === "");
            
            if (todosVacios) {
                mostrarResultado('result7', 
                    `‚úÖ √âXITO: Formulario limpiado correctamente<br>
                     <strong>Estado:</strong> Todos los campos est√°n vac√≠os`, 'success');
                return true;
            } else {
                mostrarResultado('result7', 
                    `‚ùå ERROR: El formulario no se limpi√≥ completamente`, 'error');
                return false;
            }
        }

        // 8. Prueba: Campos Opcionales
        async function testCamposOpcionales() {
            const datosMinimos = {
                curso: "Uso Seguro de Medicamentos Hospitalarios",
                fecha_inscripcion: "2025-01-23",
                enfermero: "Pedro S√°nchez Ruiz"
                // Sin area, turno (campos opcionales)
            };

            try {
                const response = await fetch('http://localhost:5000/api/inscripciones/registrar', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(datosMinimos)
                });

                const result = await response.json();
                
                if (response.ok) {
                    mostrarResultado('result8', 
                        `‚úÖ √âXITO: Inscripci√≥n con campos opcionales funcionando<br>
                         <strong>ID de Inscripci√≥n:</strong> ${result.inscripcion_id}<br>
                         <strong>Campos usados:</strong> Solo los obligatorios<br>
                         <strong>Estado:</strong> Inscripci√≥n exitosa`, 'success');
                    return true;
                } else {
                    mostrarResultado('result8', 
                        `‚ùå ERROR: ${result.error}<br>
                         <strong>Nota:</strong> El sistema deber√≠a permitir campos opcionales vac√≠os`, 'error');
                    return false;
                }
            } catch (error) {
                mostrarResultado('result8', 
                    `‚ùå ERROR DE CONEXI√ìN: ${error.message}`, 'error');
                return false;
            }
        }

        // 9. Prueba: Flujo Completo de Inscripci√≥n
        async function testFlujoCompleto() {
            mostrarResultado('result9', 'üîÑ Ejecutando flujo completo de inscripci√≥n...', 'info');
            
            const datosInscripcion = {
                curso: "Actualizaci√≥n en Cuidados Intensivos",
                fecha_inscripcion: "2025-01-24",
                enfermero: "Laura Mart√≠nez D√≠az",
                area: "Terapia Intensiva",
                turno: "Nocturno (19:00 - 8:00)"
            };

            try {
                // Paso 1: Registrar inscripci√≥n
                const response1 = await fetch('http://localhost:5000/api/inscripciones/registrar', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(datosInscripcion)
                });
                
                if (!response1.ok) {
                    throw new Error('Error al registrar inscripci√≥n');
                }
                
                const result1 = await response1.json();
                const inscripcionId = result1.inscripcion_id;
                
                // Paso 2: Verificar inscripci√≥n
                const response2 = await fetch(`http://localhost:5000/api/inscripciones/${inscripcionId}`);
                if (!response2.ok) {
                    throw new Error('Error al verificar inscripci√≥n');
                }
                
                const result2 = await response2.json();
                
                mostrarResultado('result9', 
                    `‚úÖ √âXITO: Flujo completo ejecutado correctamente<br>
                     <strong>Paso 1:</strong> Inscripci√≥n registrada (ID: ${inscripcionId})<br>
                     <strong>Paso 2:</strong> Inscripci√≥n verificada correctamente<br>
                     <strong>Datos:</strong> ${result2.inscripcion.enfermero} - ${result2.inscripcion.curso}`, 'success');
                return true;
                
            } catch (error) {
                mostrarResultado('result9', 
                    `‚ùå ERROR en flujo completo: ${error.message}`, 'error');
                return false;
            }
        }

        // 10. Prueba: Carga de Cursos Disponibles
        async function testCargarCursos() {
            try {
                const response = await fetch('http://localhost:5000/api/cursos/disponibles');
                const result = await response.json();
                
                if (response.ok) {
                    mostrarResultado('result10', 
                        `‚úÖ √âXITO: Lista de cursos cargada correctamente<br>
                         <strong>Total de cursos disponibles:</strong> ${result.cursos.length}<br>
                         <strong>Ejemplos:</strong><br>
                         <pre>${JSON.stringify(result.cursos.slice(0, 5), null, 2)}</pre>`, 'success');
                    return true;
                } else {
                    mostrarResultado('result10', 
                        `‚ùå ERROR: ${result.error}`, 'error');
                    return false;
                }
            } catch (error) {
                mostrarResultado('result10', 
                    `‚ùå ERROR DE CONEXI√ìN: ${error.message}`, 'error');
                return false;
            }
        }

        // 11. Prueba: M√∫ltiples Inscripciones
        async function testMultiplesInscripciones() {
            const inscripciones = [
                {
                    curso: "Atenci√≥n al Paciente Pedi√°trico",
                    fecha_inscripcion: "2025-01-25",
                    enfermero: "Enfermero Uno",
                    area: "Pediatr√≠a"
                },
                {
                    curso: "Atenci√≥n al Paciente Pedi√°trico",
                    fecha_inscripcion: "2025-01-25",
                    enfermero: "Enfermero Dos",
                    area: "Pediatr√≠a"
                },
                {
                    curso: "Atenci√≥n al Paciente Pedi√°trico",
                    fecha_inscripcion: "2025-01-25",
                    enfermero: "Enfermero Tres",
                    area: "Pediatr√≠a"
                }
            ];
            
            let exitosas = 0;
            let idsCreados = [];
            
            try {
                for (const inscripcion of inscripciones) {
                    const response = await fetch('http://localhost:5000/api/inscripciones/registrar', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({...inscripcion, turno: "Matutino (8:00 - 19:00)"})
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        idsCreados.push(result.inscripcion_id);
                        exitosas++;
                    }
                }
                
                // Limpiar inscripciones creadas (opcional)
                for (const id of idsCreados) {
                    await fetch(`http://localhost:5000/api/inscripciones/eliminar/${id}`, {
                        method: 'DELETE'
                    });
                }
                
                if (exitosas === inscripciones.length) {
                    mostrarResultado('result11', 
                        `‚úÖ √âXITO: Todas las inscripciones m√∫ltiples registradas<br>
                         <strong>Inscripciones creadas:</strong> ${exitosas}<br>
                         <strong>Mismo curso:</strong> Atenci√≥n al Paciente Pedi√°trico<br>
                         <strong>Misma fecha:</strong> 25/01/2025`, 'success');
                    return true;
                } else {
                    mostrarResultado('result11', 
                        `‚ö†Ô∏è PARCIAL: Solo ${exitosas} de ${inscripciones.length} inscripciones se registraron`, 'info');
                    return false;
                }
                
            } catch (error) {
                mostrarResultado('result11', 
                    `‚ùå ERROR: ${error.message}`, 'error');
                return false;
            }
        }

        // Funci√≥n para ejecutar todas las pruebas
        async function ejecutarTodasLasPruebas() {
            const pruebas = [
                testInscripcionValida,
                testInscripcionSinCurso,
                testInscripcionSinEnfermero,
                testInscripcionSinFecha,
                testInscripcionDuplicada,
                testValidacionCampos,
                testLimpiarFormulario,
                testCamposOpcionales,
                testFlujoCompleto,
                testCargarCursos,
                testMultiplesInscripciones
            ];
            
            let exitosas = 0;
            resultadosPruebas = [];
            
            mostrarResultado('resultGeneral', 'üîÑ Ejecutando todas las pruebas...', 'info');
            
            for (let i = 0; i < pruebas.length; i++) {
                const resultado = await pruebas[i]();
                resultadosPruebas.push({
                    nombre: `Prueba ${i + 1}`,
                    exitosa: resultado
                });
                
                if (resultado) exitosas++;
                
                // Peque√±a pausa entre pruebas
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            const porcentaje = Math.round((exitosas / pruebas.length) * 100);
            const mensajeFinal = `
                <h4>üìä Resumen de Pruebas - Inscripci√≥n a Cursos</h4>
                <strong>Total de pruebas:</strong> ${pruebas.length}<br>
                <strong>Exitosas:</strong> ${exitosas}<br>
                <strong>Fallidas:</strong> ${pruebas.length - exitosas}<br>
                <strong>Porcentaje de √©xito:</strong> ${porcentaje}%<br><br>
                <strong>Estado:</strong> ${porcentaje >= 80 ? '‚úÖ SATISFACTORIO' : porcentaje >= 60 ? '‚ö†Ô∏è ACEPTABLE' : '‚ùå REQUIERE ATENCI√ìN'}
            `;
            
            mostrarResultado('resultGeneral', mensajeFinal, 
                porcentaje >= 80 ? 'success' : porcentaje >= 60 ? 'info' : 'error');
        }
    </script>
</body>
</html>